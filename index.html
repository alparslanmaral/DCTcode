<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>DCT Code</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app">
    <!-- Activity Bar -->
    <div id="activity-bar">
      <div class="activity-item active" data-view="explorer" title="Explorer">🗂</div>
      <div class="activity-item" data-view="slots" title="Save Slots">💾</div>
      <div class="activity-item" data-view="github" title="GitHub Clone / Push"></div>
      <div class="activity-item" id="btn-theme-toggle" title="Tema Değiştir (Light/Dark)">🌙</div>
      <div class="spacer"></div>
      <div class="activity-item" data-view="about" title="Hakkında">ℹ️</div>
    </div>

    <!-- Side Bar -->
    <div id="side-bar">
      <!-- Explorer -->
      <div class="panel" id="panel-explorer">
        <div class="panel-header">
          <span>EXPLORER</span>
          <div class="explorer-actions">
            <button id="btn-new-project" title="Yeni Proje (Ctrl+Shift+N)">+P</button>
            <button id="btn-new-file" title="Yeni Dosya">+F</button>
            <button id="btn-new-folder" title="Yeni Klasör">+D</button>
            <button id="btn-export-zip" title="Projeyi ZIP indir">ZIP</button>
          </div>
        </div>
        <div id="project-name-wrapper">
          <input id="project-name" placeholder="Proje Adı" />
        </div>
        <ul id="file-tree" class="tree-root"></ul>
      </div>

      <!-- Slots -->
      <div class="panel hidden" id="panel-slots">
        <div class="panel-header"><span>SAVE SLOTS (5)</span></div>
        <div id="slots-list"></div>
        <div class="slot-hint">
          Mevcut projeni seçtiğin slot'a kaydedebilir veya slot'tan yükleyebilirsin.
        </div>
      </div>

      <!-- GitHub -->
      <div class="panel hidden" id="panel-github">
        <div class="panel-header"><span>GITHUB CLONE & PUSH</span></div>
        <div class="github-section">
          <!-- AUTH BOX -->
          <div class="github-auth-box" id="github-auth-box">
            <strong>GitHub PAT (Personal Access Token)</strong>
            <div class="github-small-note">
              Yalnızca tarayıcıda saklanır. <a href="https://github.com/settings/tokens" target="_blank">PAT oluştur</a>
            </div>
            <input id="github-pat-input" placeholder="ghp_..." autocomplete="off" />
            <div class="github-auth-actions">
              <button id="btn-save-pat">Token Kaydet</button>
              <button id="btn-validate-pat">Doğrula</button>
              <button id="btn-clear-pat">Sil / Çıkış</button>
              <button id="btn-list-repos">Repo Getir</button>
            </div>
            <div id="github-user-info" class="github-user" style="display:none;">
              <img id="github-user-avatar" src="" alt="avatar" />
              <div>
                <div><span id="github-user-login"></span><span class="github-badge">AUTH</span></div>
                <div id="github-user-name" style="font-size:11px; opacity:.8;"></div>
              </div>
            </div>
            <div class="github-warning">
              Güvenlik: XSS açığı tokenınızı çalabilir. İşiniz bitince siliniz.
            </div>
          </div>

          <!-- CLONE -->
          <label>Repo URL:
            <input id="github-url" placeholder="https://github.com/kullanici/repo veya .../tree/branch" />
          </label>
          <button id="btn-clone">Clone</button>

          <div class="github-divider"></div>

          <!-- PUSH BOX -->
          <div class="github-push-box">
            <strong>Push (Tek Commit)</strong>
            <div class="github-small-note">
              Aşağıda token doğrulandıysa repos listelenir.
            </div>
            <select id="github-repo-select">
              <option value="">-- Repo Seç --</option>
            </select>
            <div class="github-inline">
              <input id="github-branch-input" placeholder="Branch (örn: main)" />
              <input id="github-prefix-input" placeholder="Alt Klasör (opsiyonel)" />
            </div>
            <input id="github-commit-message" placeholder="Commit mesajı" />
            <div class="github-push-actions">
              <button id="btn-check-branch">Branch Kontrol</button>
              <button id="btn-create-branch">Branch Oluştur</button>
              <button id="btn-push-project">Push Proje</button>
            </div>
          </div>

          <div class="github-divider"></div>
          <div class="github-log-section-title">LOG</div>
          <div id="clone-progress"></div>
        </div>
      </div>

      <!-- About -->
      <div class="panel hidden" id="panel-about">
        <div class="panel-header"><span>HAKKINDA</span></div>
        <div class="about">
          <p>DCT Code - Hafif web tabanlı VSCode benzeri editör.</p>
          <ul>
            <li>LocalStorage kalıcılık</li>
            <li>5 Save Slot</li>
            <li>GitHub public repo clone</li>
            <li>Light / Dark Tema</li>
            <li>GitHub PAT ile push</li>
            <li>ZIP Export</li>
          </ul>
          <p>Geliştirmeye açık: syntax highlight, terminal entegrasyonu vb.</p>
        </div>
      </div>
    </div>

    <!-- Main / Editor -->
    <div id="main">
      <div id="tabs-bar"></div>
      <div id="editor-container">
        <textarea id="editor" spellcheck="false"></textarea>
      </div>
    </div>
  </div>

  <!-- Context Menus -->
  <ul id="file-context" class="context-menu hidden">
    <li data-action="new-file">Yeni Dosya</li>
    <li data-action="new-folder">Yeni Klasör</li>
    <li data-action="rename">Yeniden Adlandır</li>
    <li data-action="delete" class="danger">Sil</li>
  </ul>

  <ul id="tab-context" class="context-menu hidden">
    <li data-action="close">Sekmeyi Kapat</li>
    <li data-action="close-others">Diğerlerini Kapat</li>
    <li data-action="close-all">Hepsini Kapat</li>
  </ul>

  <!-- Status Bar -->
  <div id="status-bar">
    <div id="status-left">
      <span id="status-project">No Project</span>
      <span id="status-file">No File</span>
    </div>
    <div id="status-right">
      <span id="status-changed">Saved</span>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
